(this["webpackJsonpproyecto-final-pos"]=this["webpackJsonpproyecto-final-pos"]||[]).push([[0],{176:function(e,a,t){},284:function(e,a,t){},286:function(e,a,t){"use strict";t.r(a);var c=t(0),s=t(23),n=t.n(s),r=t(32),i=t(11),o=t(36),d=t(1),l=function(e){var a=e.objPlatoPedido;return Object(d.jsxs)("li",{className:"comanda__item",children:[Object(d.jsxs)("p",{className:"comanda__nombre",children:[Object(d.jsx)("span",{children:Object(d.jsx)("strong",{children:a.plato_nom})}),Object(d.jsxs)("span",{children:["Precio: S/ ",a.plato_pre]})]}),Object(d.jsx)("p",{className:"comanda__cantidad",children:a.cantidad}),Object(d.jsx)("p",{className:"comanda__precio",children:Object(d.jsxs)("strong",{children:["S/ ",+a.cantidad*+a.plato_pre]})})]})},j=t(8),b=t(294),u=t(129),O=t.n(u),p=t(10),h=t.n(p),m=t(16),x=t(17),f=t.n(x),v="https://punto-de-venta-codigo-backend.herokuapp.com",_="INICIO_CARGANDO_MESAS",N="FIN_CARGANDO_MESAS",g="SET_MESAS",y="SET_SELECCIONAR_MESA",S="INICIO_CARGANDO_CATEGORIAS",A="FIN_CARGANDO_CATEGORIAS",C="SET_CATEGORIAS",I="SET_SELECCIONAR_CATEGORIA",P="INICIO_CARGANDO_PLATOS_POR_CATEGORIA",w="FIN_CARGANDO_PLATOS_POR_CATEGORIA",E="SET_PLATOS_POR_CATEGORIA",D="AGREGAR_PLATO_A_PEDIDO",k="ELIMINAR_PEDIDO",R="INICIO_CARGANDO_LOGIN",T="FIN_CARGANDO_LOGIN",M="SET_SUCCESS_LOGIN",G="INICIO_CARGANDO_PLATOS",L="FIN_CARGANDO_PLATOS",B="SET_PLATOS",F="INICIO_CARGANDO_PEDIDOS_BD",J="FIN_CARGANDO_PEDIDOS_BD",U="SET_PEDIDOS_BD",z=function(){return{type:F}},H=t(298),Y=t(293),Z=function(){var e=Object(m.a)(h.a.mark((function e(a,t){var c,s,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={usu_id:2,mesa_id:t,pedido_est:"pagado",pedido_nro:Object(H.a)(),pedido_fech:Object(Y.a)(new Date,"yyyy-MM-dd hh:mm:ss"),pedidoplatos:a.platos.map((function(e){return{plato_id:e.plato_id,pedidoplato_cant:e.cantidad}}))},s="".concat(v,"/pedido"),e.next=4,f.a.post(s,JSON.stringify(c),{headers:{"Content-type":"application/json"}});case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),q=function(e){var a=e.mostrar,t=e.setMostrar,s=Object(j.b)(),n=Object(c.useState)(!1),r=Object(o.a)(n,2),i=r[0],l=r[1],u=Object(j.c)((function(e){return e.pedido})).pedidos,p=Object(j.c)((function(e){return e.mesa})).idMesaSeleccionada,h=u.find((function(e){return e.mesaId===p})),m=0;h&&(m=h.platos.reduce((function(e,a){return e+ +a.cantidad*+a.plato_pre}),0));return Object(d.jsxs)(b.a,{size:"xl",show:a,onHide:function(){return t(!1)},children:[Object(d.jsx)(b.a.Header,{closeButton:!0,children:Object(d.jsx)(b.a.Title,{children:"Modal heading"})}),Object(d.jsx)(b.a.Body,{children:Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"col-md-12",children:Object(d.jsxs)("div",{className:"invoice",children:[Object(d.jsx)("div",{className:"invoice-company text-inverse f-w-600",children:"CodiGo - POS"}),Object(d.jsxs)("div",{className:"invoice-header",children:[Object(d.jsxs)("div",{className:"invoice-from",children:[Object(d.jsx)("small",{children:"from"}),Object(d.jsxs)("address",{className:"m-t-5 m-b-5",children:[Object(d.jsx)("strong",{className:"text-inverse",children:"Twitter, Inc."}),Object(d.jsx)("br",{}),"Street Address",Object(d.jsx)("br",{}),"City, Zip Code",Object(d.jsx)("br",{}),"Phone: (123) 456-7890",Object(d.jsx)("br",{}),"Fax: (123) 456-7890"]})]}),Object(d.jsxs)("div",{className:"invoice-to",children:[Object(d.jsx)("small",{children:"to"}),Object(d.jsxs)("address",{className:"m-t-5 m-b-5",children:[Object(d.jsx)("strong",{className:"text-inverse",children:"Company Name"}),Object(d.jsx)("br",{}),"Street Address",Object(d.jsx)("br",{}),"City, Zip Code",Object(d.jsx)("br",{}),"Phone: (123) 456-7890",Object(d.jsx)("br",{}),"Fax: (123) 456-7890"]})]}),Object(d.jsxs)("div",{className:"invoice-date",children:[Object(d.jsx)("small",{children:"Invoice / July period"}),Object(d.jsx)("div",{className:"date text-inverse m-t-5",children:"August 3,2012"}),Object(d.jsxs)("div",{className:"invoice-detail",children:["#0000123DSS",Object(d.jsx)("br",{}),"Services Product"]})]})]}),Object(d.jsxs)("div",{className:"invoice-content",children:[Object(d.jsx)("div",{className:"table-responsive",children:Object(d.jsxs)("table",{className:"table table-invoice",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Descripci\xf3n"}),Object(d.jsx)("th",{className:"text-center",width:"10%",children:"P. Unitario"}),Object(d.jsx)("th",{className:"text-center",width:"10%",children:"Cantidad"}),Object(d.jsx)("th",{className:"text-right",width:"20%",children:"Sub Total"})]})}),Object(d.jsx)("tbody",{children:h?h.platos.map((function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:Object(d.jsx)("span",{className:"text-inverse",children:e.plato_nom})}),Object(d.jsxs)("td",{className:"text-center",children:["S/ ",e.plato_pre]}),Object(d.jsx)("td",{className:"text-center",children:e.cantidad}),Object(d.jsxs)("td",{className:"text-right",children:["S/"," ",+e.plato_pre*+e.cantidad]})]})})):null})]})}),Object(d.jsxs)("div",{className:"invoice-price",children:[Object(d.jsx)("div",{className:"invoice-price-left",children:Object(d.jsxs)("div",{className:"invoice-price-row",children:[Object(d.jsxs)("div",{className:"sub-price",children:[Object(d.jsx)("small",{children:"SUBTOTAL"}),Object(d.jsx)("span",{className:"text-inverse",children:"$4,500.00"})]}),Object(d.jsx)("div",{className:"sub-price",children:Object(d.jsx)("i",{className:"fa fa-plus text-muted"})}),Object(d.jsxs)("div",{className:"sub-price",children:[Object(d.jsx)("small",{children:"PAYPAL FEE (5.4%)"}),Object(d.jsx)("span",{className:"text-inverse",children:"$108.00"})]})]})}),Object(d.jsxs)("div",{className:"invoice-price-right",children:[Object(d.jsx)("small",{children:"TOTAL"})," ",Object(d.jsxs)("span",{className:"f-w-600",children:["S/ ",m]})]})]})]}),Object(d.jsxs)("div",{className:"invoice-note",children:["* Make all cheques payable to [Your Company Name]",Object(d.jsx)("br",{}),"* Payment is due within 30 days",Object(d.jsx)("br",{}),"* If you have any questions concerning this invoice, contact [Name, Phone Number, Email]"]}),Object(d.jsxs)("div",{className:"invoice-footer",children:[Object(d.jsx)("p",{className:"text-center m-b-5 f-w-600",children:"THANK YOU FOR YOUR BUSINESS"}),Object(d.jsxs)("p",{className:"text-center",children:[Object(d.jsxs)("span",{className:"m-r-10",children:[Object(d.jsx)("i",{className:"fa fa-fw fa-lg fa-globe"})," ","matiasgallipoli.com"]}),Object(d.jsxs)("span",{className:"m-r-10",children:[Object(d.jsx)("i",{className:"fa fa-fw fa-lg fa-phone-volume"})," ","T:016-18192302"]}),Object(d.jsxs)("span",{className:"m-r-10",children:[Object(d.jsx)("i",{className:"fa fa-fw fa-lg fa-envelope"})," ","rtiemps@gmail.com"]})]})]})]})})})}),Object(d.jsx)(b.a.Footer,{children:Object(d.jsx)("button",{className:"btn btn-success",onClick:function(){h&&(l(!0),Z(h,p).then((function(e){e.ok&&(s({type:k,payload:p}),t(!1),O.a.fire({icon:"success",title:"\xc9xito!",text:"Pedido pagado con \xe9xito"})),l(!1)})))},disabled:i,children:"PAGAR"})})]})},X=function(){var e=Object(j.c)((function(e){return e.pedido})).pedidos,a=Object(j.c)((function(e){return e.mesa})),t=a.idMesaSeleccionada,s=a.mesas,n=Object(c.useState)(!1),r=Object(o.a)(n,2),i=r[0],b=r[1],u=s.find((function(e){return e.mesa_id===t})),O=e.find((function(e){return e.mesaId===t}));return Object(d.jsxs)("div",{className:"boleta",children:[Object(d.jsxs)("h3",{children:["Pedido Mesa: \xa0",Object(d.jsx)("span",{className:"color-secundario",children:u?u.mesa_nro:"seleccione"})]}),Object(d.jsx)("hr",{}),Object(d.jsxs)("div",{className:"comanda",children:[Object(d.jsx)("h4",{className:"comanda__mesa",children:u?"Mesa ".concat(u.mesa_nro):"seleccione"}),Object(d.jsx)("p",{className:"comanda__usuario",children:"Carlos Jimenez"}),Object(d.jsx)("hr",{}),Object(d.jsx)("ul",{className:"comanda__lista",children:O?O.platos.map((function(e,a){return Object(d.jsx)(l,{objPlatoPedido:e},a)})):null}),-1!==t?Object(d.jsx)("button",{className:"boton boton-success boton-block",onClick:function(){b(!0)},children:"PAGAR"}):null]}),Object(d.jsx)(q,{mostrar:i,setMostrar:b})]})},$=function(e){var a=e.objCategoria,t=Object(j.b)(),c=Object(j.c)((function(e){return e.categoria})).idCategoriaSeleccionada===a.categoria_id?"active":"";return Object(d.jsxs)("li",{onClick:function(){var e;t((e=a.categoria_id,{type:I,payload:e}))},className:c,children:[Object(d.jsx)("img",{src:"/images/plato_blanco.svg",alt:""}),Object(d.jsx)("span",{children:a.categoria_nom})]})},K=t(73),V=t(74),W=function(){var e=Object(j.c)((function(e){return e.categoria})),a=e.categorias,t=e.cargandoCategorias;return Object(d.jsx)("nav",{className:"menu",children:Object(d.jsx)("ul",{className:"menu__lista",children:t?Object(d.jsx)(K.a,{icon:V.a,spin:!0,size:"3x",color:"white"}):a.map((function(e){return Object(d.jsx)($,{objCategoria:e},e.categoria_id)}))})})},Q=function(){return Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)("div",{className:"header__logo",children:Object(d.jsx)("img",{src:"/images/logo.svg",alt:""})}),Object(d.jsxs)("div",{className:"header__buscador",children:[Object(d.jsx)("img",{src:"/images/search.svg",alt:""}),Object(d.jsx)("input",{type:"text",className:"header__input",placeholder:"Busca un t\xe9rmino"})]}),Object(d.jsxs)("div",{className:"header__usuario",children:[Object(d.jsx)(r.b,{to:"/admin/dashboard",className:"btn btn-success",children:"Ir a Dashboard"}),Object(d.jsx)("img",{src:"https://randomuser.me/api/portraits/men/90.jpg",alt:""}),Object(d.jsx)("span",{children:"Jorge Garnica"})]})]})},ee=function(e){var a=e.objMesa,t=Object(j.b)(),c=+Object(j.c)((function(e){return e.mesa})).idMesaSeleccionada===+a.mesa_id?"activo":"";return Object(d.jsxs)("li",{className:"mesas__mesa ".concat(c),onClick:function(){var e;t((e=a.mesa_id,{type:y,payload:e}))},children:[Object(d.jsx)("span",{className:"mesas__titulo",children:"Mesa"}),Object(d.jsx)("span",{className:"mesas__numero",children:a.mesa_nro})]})},ae=function(){var e=Object(j.c)((function(e){return e.mesa})),a=e.mesas,t=e.cargandoMesas;return Object(d.jsxs)("div",{className:"mesas",children:[Object(d.jsx)("ul",{className:"mesas__lista",children:!0===t?Object(d.jsx)(K.a,{icon:V.a,spin:!0,size:"3x",color:"white"}):a.map((function(e){return Object(d.jsx)(ee,{objMesa:e},e.mesa_id)}))}),Object(d.jsx)("div",{className:"mesas__info"})]})},te=function(e){var a=e.objPlato,t=Object(j.b)(),c=Object(j.c)((function(e){return e.mesa})).idMesaSeleccionada;return Object(d.jsxs)("div",{className:"carta__plato",children:[Object(d.jsx)("img",{src:a.plato_img,alt:""}),Object(d.jsx)("h4",{className:"carta__titulo",children:a.plato_nom}),Object(d.jsxs)("span",{className:"carta__precio",children:["S/ ",a.plato_pre]}),Object(d.jsxs)("div",{className:"carta__botones",children:[Object(d.jsx)("button",{className:"boton boton-outline-primary boton-restar",children:"-1"}),Object(d.jsx)("button",{className:"boton boton-outline-primary boton-sumar",onClick:function(){-1!==c&&t(function(e,a){return{type:D,payload:{objPlato:e,mesaId:a}}}(a,c))},children:"+1"})]})]})},ce=function(){var e=Object(j.c)((function(e){return e.categoria})),a=e.idCategoriaSeleccionada,t=e.categorias,s=Object(j.c)((function(e){return e.plato})).platosPorCategoria,n=t.find((function(e){return e.categoria_id===a})),r=Object(j.b)();return Object(c.useEffect)((function(){var e;-1!==a&&r((e=a,function(){var a=Object(m.a)(h.a.mark((function a(t){var c,s;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:P}),c="".concat(v,"/categoria/").concat(e,"/platos"),a.next=4,f.a.get(c);case 4:s=a.sent,t({type:E,payload:s.data.content.Platos}),t({type:w});case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()))}),[a,r]),Object(d.jsxs)("div",{className:"carta",children:[Object(d.jsxs)("h3",{children:["Lista de Platos Categoria: \xa0"," ",Object(d.jsx)("span",{className:"color-secundario",children:n?n.categoria_nom:"Seleccione Categoria"})]}),Object(d.jsx)("div",{className:"carta__platos",children:s.map((function(e){return Object(d.jsx)(te,{objPlato:e},e.plato_id)}))})]})},se=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Q,{}),Object(d.jsxs)("main",{className:"pos-container",children:[Object(d.jsx)(W,{}),Object(d.jsxs)("section",{className:"tabla",children:[Object(d.jsx)(ae,{}),Object(d.jsxs)("div",{className:"pedido",children:[Object(d.jsx)(ce,{}),Object(d.jsx)(X,{})]})]})]})]})},ne=function(){var e=Object(j.b)();return e(function(){var e=Object(m.a)(h.a.mark((function e(a){var t,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:_}),t="".concat(v,"/mesa"),e.next=4,f.a.get(t);case 4:c=e.sent,a({type:g,payload:c.data.content}),a({type:N});case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),e(function(){var e=Object(m.a)(h.a.mark((function e(a){var t,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:S}),t="".concat(v,"/categoria"),e.next=4,f.a.get(t);case 4:c=e.sent,a({type:C,payload:c.data.content}),a({type:A});case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(i.d,{children:Object(d.jsx)(i.b,{path:"/pos/pos",component:se})})})},re=t(12),ie=t(7),oe=(t(176),function(){return{type:R}}),de=function(){return{type:T}},le=function(e){var a=Object(j.b)(),t=Object(j.c)((function(e){return e.auth})),s=t.autenticado;t.cargando;s&&e.history.push("/admin/dashboard");var n=Object(c.useState)({correo:"jgarnica@gmail.com",password:"123456"}),r=Object(o.a)(n,2),i=r[0],l=r[1],b=function(e){l(Object(ie.a)(Object(ie.a)({},i),{},Object(re.a)({},e.target.name,e.target.value)))};return Object(d.jsx)("main",{className:"login",children:Object(d.jsxs)("div",{className:"login__form",children:[Object(d.jsx)("h1",{children:"Inicio de Sesi\xf3n"}),Object(d.jsxs)("form",{className:"formulario",onSubmit:function(e){var t,c;e.preventDefault(),a((t=i.correo,c=i.password,function(){var e=Object(m.a)(h.a.mark((function e(a){var s,n,r,i,o,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(oe()),s="".concat(v,"/login"),e.next=4,f.a.post(s,JSON.stringify({correo:t,password:c}),{headers:{"Content-type":"application/json"}});case 4:200===(n=e.sent).status&&(r=n.data.token,localStorage.setItem("token",r),i=r.split(".")[1],o=atob(i),d=JSON.parse(o),a({type:M,payload:{autenticado:!0,usu_nom:d.usu_nom,usu_id:d.usu_id,usu_tipo:d.usu_tipo,token:r}})),a(de());case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()))},children:[Object(d.jsx)("label",{htmlFor:"",children:"Email:"}),Object(d.jsx)("input",{type:"email",className:"formulario__input",placeholder:"Email",name:"correo",value:i.correo,onChange:b}),Object(d.jsx)("label",{htmlFor:"",children:"Password:"}),Object(d.jsx)("input",{type:"password",className:"formulario__input",placeholder:"Password",name:"password",value:i.password,onChange:b}),Object(d.jsx)("button",{className:"formulario__submit",type:"submit",children:"Iniciar Sesi\xf3n"})]})]})})},je=function(){return Object(d.jsx)(i.d,{children:Object(d.jsx)(i.b,{path:"/auth/login",component:le})})},be=t(296),ue=t(297),Oe=t(292),pe=t(295),he=t(130),me=Object(i.g)((function(e){return Object(d.jsx)("header",{children:Object(d.jsxs)(be.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(d.jsx)(be.a.Brand,{href:"#home",children:"React-Bootstrap"}),Object(d.jsx)(be.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(d.jsxs)(be.a.Collapse,{id:"basic-navbar-nav",children:[Object(d.jsxs)(ue.a,{className:"mr-auto",children:[Object(d.jsx)(ue.a.Link,{href:"#home",children:"Home"}),Object(d.jsx)(ue.a.Link,{href:"#link",children:"Link"}),Object(d.jsxs)(Oe.a,{title:"Dropdown",id:"basic-nav-dropdown",children:[Object(d.jsx)(Oe.a.Item,{href:"#action/3.1",children:"Action"}),Object(d.jsx)(Oe.a.Item,{href:"#action/3.2",children:"Another action"}),Object(d.jsx)(Oe.a.Item,{href:"#action/3.3",children:"Something"}),Object(d.jsx)(Oe.a.Divider,{}),Object(d.jsx)(Oe.a.Item,{href:"#action/3.4",children:"Separated link"})]})]}),Object(d.jsx)(pe.a,{inline:!0,children:Object(d.jsx)(he.a,{variant:"outline-success",type:"button",onClick:function(){e.history.push("/pos/pos")},children:"Ir a POS"})})]})]})})})),xe=t(134),fe={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},ve=function(){var e=Object(j.c)((function(e){return e.plato})),a=e.platos,t=e.cargandoPlatos,c=Object(j.c)((function(e){return e.pedido})).pedidosDB,s=[],n=[];a.length>0&&c.length>0&&(s=c.map((function(e){var a=new Date(e.pedido_fech);return Object(Y.a)(a,"MM/dd hh:mm")})),n=c.map((function(e){var t=0;return e.PedidoPlatos.forEach((function(e){var c=a.find((function(a){return a.plato_id===e.plato_id}));t+=+c.plato_pre*+e.pedidoplato_cant})),t}))),console.log(n);var r={labels:s,datasets:[{label:"Monto de venta",data:n,backgroundColor:["rgba(255, 99, 132, 0.2)"],borderColor:["rgba(255, 99, 132, 1)"],borderWidth:1}]};return Object(d.jsxs)("main",{className:"container",children:[Object(d.jsxs)("h1",{className:"display-4 mt-5",children:["Dashboard CodiGo - ",Object(d.jsx)("span",{className:"text-danger",children:"POS"})]}),Object(d.jsx)("hr",{}),Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col-12",children:Object(d.jsx)(xe.a,{data:r,options:fe})})}),Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)("div",{className:"col-md-4",children:Object(d.jsx)("div",{className:"card bg-secondary text-white",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("h4",{className:"card-title",children:"PLATOS"}),Object(d.jsx)("h5",{className:"display-4 text-center",children:t?Object(d.jsx)("div",{class:"spinner-border text-light",role:"status",children:Object(d.jsx)("span",{class:"sr-only",children:"Loading..."})}):a.length})]})})}),Object(d.jsx)("div",{className:"col-md-4",children:Object(d.jsx)("div",{className:"card bg-primary text-white",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("h4",{className:"card-title",children:"MESAS"}),Object(d.jsx)("h5",{className:"display-4 text-center",children:"9"})]})})}),Object(d.jsx)("div",{className:"col-md-4",children:Object(d.jsx)("div",{className:"card bg-dark text-white",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("h4",{className:"card-title",children:"USUARIOS"}),Object(d.jsx)("h5",{className:"display-4 text-center",children:"15"})]})})})]})]})},_e=function(){var e=Object(j.b)();return e(function(){var e=Object(m.a)(h.a.mark((function e(a){var t,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:G}),t="".concat(v,"/plato"),e.next=4,f.a.get(t);case 4:c=e.sent,console.log(c),a({type:B,payload:c.data.content}),a({type:L});case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),e(function(){var e=Object(m.a)(h.a.mark((function e(a){var t,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(z),t="".concat(v,"/pedido"),e.next=4,f.a.get(t);case 4:c=e.sent,a({type:U,payload:c.data.pedidos}),a(z);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(me,{}),Object(d.jsx)(i.d,{children:Object(d.jsx)(i.b,{path:"/admin/dashboard",component:ve})})]})},Ne=function(e){var a=Object(j.c)((function(e){return e.auth})),t=a.autenticado;return a.cargando?Object(d.jsx)("p",{children:"CARGANDO..."}):t?Object(d.jsx)(i.b,{path:e.path,component:e.component}):Object(d.jsx)(i.a,{to:"/auth/login"})},ge=function(){return Object(j.b)()(function(){var e=Object(m.a)(h.a.mark((function e(a){var t,c,s,n,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(oe()),t=localStorage.getItem("token"),e.prev=2,!t){e.next=10;break}return c="".concat(v,"/verificar"),e.next=7,f.a.post(c,null,{headers:{authorization:"Bearer ".concat(t)}});case 7:s=e.sent,console.log(s),s.data.ok&&(n=t.split(".")[1],r=atob(n),i=JSON.parse(r),a({type:M,payload:{autenticado:!0,usu_nom:i.usu_nom,usu_id:i.usu_id,usu_tipo:i.usu_tipo,token:t}}),a(de()));case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),a(de());case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(a){return e.apply(this,arguments)}}()),Object(d.jsx)(r.a,{children:Object(d.jsxs)(i.d,{children:[Object(d.jsx)(i.b,{path:"/pos",component:ne}),Object(d.jsx)(i.b,{path:"/auth",component:je}),Object(d.jsx)(Ne,{path:"/admin",component:_e}),Object(d.jsx)(i.a,{to:"/pos/pos"})]})})},ye=(t(284),t(285),t(56)),Se=t(133),Ae={autenticado:!1,token:null,usu_nom:null,cargando:!1,usu_tipo:null,usu_id:null},Ce={categorias:[],cargandoCategorias:!1,idCategoriaSeleccionada:-1},Ie={mesas:[],cargandoMesas:!1,idMesaSeleccionada:-1},Pe=t(13),we={pedidosDB:[],cargandoPedidosDB:!1,pedidos:[]},Ee={platosPorCategoria:[],cargandoPlatosPorCategoria:!1,platos:[],cargandoPlatos:!1},De="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ye.c,ke=Object(ye.b)({mesa:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case y:return Object(ie.a)(Object(ie.a)({},e),{},{idMesaSeleccionada:a.payload});case _:return Object(ie.a)(Object(ie.a)({},e),{},{cargandoMesas:!0});case N:return Object(ie.a)(Object(ie.a)({},e),{},{cargandoMesas:!1});case g:return Object(ie.a)(Object(ie.a)({},e),{},{mesas:a.payload});default:return e}},categoria:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case I:return Object(ie.a)(Object(ie.a)({},e),{},{idCategoriaSeleccionada:a.payload});case S:return Object(ie.a)(Object(ie.a)({},e),{},{cargandoCategorias:!0});case A:return Object(ie.a)(Object(ie.a)({},e),{},{cargandoCategorias:!1});case C:return Object(ie.a)(Object(ie.a)({},e),{},{categorias:a.payload});default:return e}},plato:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case P:return Object(ie.a)(Object(ie.a)({},e),{},{cargandoPlatosPorCategoria:!0});case w:return Object(ie.a)(Object(ie.a)({},e),{},{cargandoPlatosPorCategoria:!1});case E:return Object(ie.a)(Object(ie.a)({},e),{},{platosPorCategoria:a.payload});case G:return Object(ie.a)(Object(ie.a)({},e),{},{cargandoPlatos:!0});case L:return Object(ie.a)(Object(ie.a)({},e),{},{cargandoPlatos:!1});case B:return Object(ie.a)(Object(ie.a)({},e),{},{platos:a.payload});default:return e}},pedido:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case F:return Object(ie.a)(Object(ie.a)({},e),{},{cargandoPedidosDB:!0});case J:return Object(ie.a)(Object(ie.a)({},e),{},{cargandoPedidosDB:!1});case U:return Object(ie.a)(Object(ie.a)({},e),{},{pedidosDB:a.payload});case D:var t=Object(Pe.a)(e.pedidos),c=t.findIndex((function(e){return e.mesaId===a.payload.mesaId}));if(c>=0){var s=t[c].platos.findIndex((function(e){return e.plato_id===a.payload.objPlato.plato_id}));if(s>=0)t[c].platos[s].cantidad+=1;else{var n=Object(ie.a)(Object(ie.a)({},a.payload.objPlato),{},{cantidad:1});t[c].platos.push(n)}}else{var r={mesaId:a.payload.mesaId,platos:[Object(ie.a)(Object(ie.a)({},a.payload.objPlato),{},{cantidad:1})]};t.push(r)}return Object(ie.a)(Object(ie.a)({},e),{},{pedidos:t});case k:var i=Object(Pe.a)(e.pedidos);return i=i.filter((function(e){return e.mesaId!==a.payload})),Object(ie.a)(Object(ie.a)({},e),{},{pedidos:i});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case R:return Object(ie.a)(Object(ie.a)({},e),{},{cargando:!0});case T:return Object(ie.a)(Object(ie.a)({},e),{},{cargando:!1});case M:return Object(ie.a)(Object(ie.a)({},e),a.payload);default:return e}}}),Re=Object(ye.d)(ke,De(Object(ye.a)(Se.a)));n.a.render(Object(d.jsx)(j.a,{store:Re,children:Object(d.jsx)(ge,{})}),document.getElementById("root"))}},[[286,1,2]]]);
//# sourceMappingURL=main.7c3f0a8d.chunk.js.map